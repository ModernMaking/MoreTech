<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="" />

<title>ВМЕСТЕ.VTB</title>

<!--    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />-->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
<link href="css/style.css" rel="stylesheet" />
<link href="css/responsive.css" rel="stylesheet" />

<script>
  function sendCoins(button, toId)
  {
    var inputs = button.parentNode.getElementsByTagName("input");
    console.log(inputs[0].value," ",inputs[1].value," ",inputs[2].value)

    var xhr = new XMLHttpRequest();
    xhr.open("POST","../../user/sendCoinsFromToLoginPassword?login="+inputs[0].value+"&password="+inputs[1].value+"&toId="+toId+"&description=d&sum="+inputs[2].value);
    xhr.send();
    if (xhr.status != 200) {
      // обработать ошибку
      alert( xhr.status + ': ' + xhr.statusText ); // пример вывода: 404: Not Found
    } else {
      // вывести результат
      alert( xhr.responseText ); // responseText -- текст ответа.
    }
  }
</script>

</head>
<body>

<header>
  <div class="px-3 py-2 text-white" style="background-color: #0a2896">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="../../" class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
          <svg class="header-logo icon" focusable="false" color="" role="img" width="38" height="22"
               data-v-e4f938f5="" data-v-315bfda5="">
            <path style="color: #0a2896" fill="white"
                  d="M6.665-0.002l-1.669 4.579h23.127l1.669-4.579h-23.127zM4.162 6.865l-1.669 4.578h23.127l1.669-4.578h-23.127zM1.663 13.732l-1.669 4.578h23.127l1.668-4.578h-23.126z"></path>
            <!--                  <path fill="white" d="M49.16 20.055v0.097c1.057 0.388 2.067 1.068 2.596 1.504 1.634 1.359 2.356 3.154 2.356 5.483 0 3.835-2.019 6.6-5.336 7.474-1.010 0.291-2.067 0.388-4.038 0.388h-10.045v-28.048h8.893c1.827 0 3.076 0.097 4.181 0.387 3.221 0.874 5.336 3.106 5.336 6.648 0 1.893-0.673 3.495-1.778 4.562-0.481 0.485-1.154 1.068-2.163 1.504zM40.268 23.015v7.376h3.846c1.153 0 2.211-0.097 2.98-0.825s1.105-1.65 1.105-2.863c0-0.921-0.241-1.795-0.721-2.426-0.817-1.019-1.827-1.262-3.557-1.262h-3.654zM40.219 18.162h3.125c0.961 0 1.442 0 1.922-0.145 1.299-0.389 2.116-1.552 2.116-3.154 0-1.892-0.865-2.718-2.116-3.105-0.529-0.146-1.057-0.194-2.115-0.194h-2.932v6.599zM62.475 35.002v-23.342h-8.027v-4.706h22.305l-1.586 4.706h-7.115v23.342h-5.576zM78.483 35.002v-28.048h18.075l-1.586 4.706h-10.96v6.212h4.471c3.605 0 5.48 0.874 6.778 1.989 1.010 0.874 2.74 2.814 2.74 6.649 0 3.785-1.778 5.871-3.269 6.939-1.73 1.212-3.557 1.553-7.259 1.553h-8.989zM84.011 30.294h4.182c1.586 0 2.547-0.388 3.22-1.262 0.336-0.436 0.817-1.214 0.817-2.669s-0.481-2.475-1.442-3.203c-0.576-0.436-1.346-0.678-2.644-0.678h-4.134v7.812z"></path>-->
          </svg>
          <span>
                        Вместе.VTB
                    </span>
        </a>

        <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">
          <li>
            <a href="#" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#home"></use></svg>
              Главная
            </a>
          </li>
          <li>
            <a href="#" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#speedometer2"></use></svg>
              Адаптация
            </a>
          </li>
          <li>
            <a href="#" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#people-circle"></use></svg>
              Достижения
            </a>
          </li>
          <li>
            <a href="#" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#people-circle"></use></svg>
              Наставники
            </a>
          </li>
          <li>
            <a href="#" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#people-circle"></use></svg>
              Команда
            </a>
          </li>
          <li>
            <a href="/user/login" class="nav-link text-secondary">
              <svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#people-circle"></use></svg>
              Вход
            </a>
          </li>
          <li>
            <a href="/user/register" class="nav-link text-white">
              <svg class="bi d-block mx-auto mb-1" width="24" height="24"><use xlink:href="#people-circle"></use></svg>
              Регистрация
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>

<div>
  <table class="table">
    <thead>
    <tr>
      <th scope="col">
        Автор
      </th>
      <th scope="col">
        Сообщение
      </th>
      <th>
        Благодарность
      </th>
    </tr>
    </thead>

  <tbody>
    <tr th:each="message : ${messages}">
      <td th:text="${message.owner.firstName}+' '+${message.owner.secondName}">Автор</td>
      <td th:text="${message.message}">Сообщение</td>
      <td>
        <button class="btn btn-primary" onclick="this.nextSibling.nextSibling.hidden=false;">Выразить благодарность</button>
        <div hidden="hidden">
          <form>
            <p>Ваш логин:</p><input type="text">
            <p>Ваш пароль:</p><input type="text">
          <p>Подарить монет:</p><input type="number" min="0" max="10">
          <button class="btn btn-primary" th:onclick="'sendCoins(this,'+${message.owner.id}+'); return false;'">Подарить</button>
          </form>
        </div>
      </td>
    </tr>
  </tbody>
  </table>
</div>


<script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
</body>
</html>